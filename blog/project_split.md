# 项目拆分
## 拆分原因
由于原项目已经过于庞大，代码维护以及部分代码更新导致旧代码不能使用的问题日益凸显，尤其是一次代码回退导致多数项目代码版本回溯，造成影响已经很大，所以决定对原有项目进行代码级别的拆分。
## 拆分过程
将代码拆分分为部分阶段，这样对于目标的设定和进度的评估带来一定的方便

    - 通过url将项目拆分为不同的project
    - 将拆分开的代码独立运行
    - 将静态文件代理到同一个文件夹

为了保证拆分过程的简单，将拆分过程简单的分为三个过程，由于第一阶段仅仅希望将代码拆分开来，所以第一个阶段将代码拆成了不同的项目，以减少项目的粒度，第二步骤保证代码的独立运行，代码依赖再次阶段得到了很好的解决，也就是项目之间不存在互相的依赖以及耦合。第三阶段是第二阶段保证接口数据返回正确的情况下由nginx对接口进行静态文件转发，由于部分文件没有进行二级目录配置，所以此部分决定不进行拆分，对于进行二级目录拆分的虽然可以保证nginx进行转发的正确，考虑到前端对于git的使用的问题，并没有进行拆分，此阶段仅仅保证了前后端代码分离。

## 拆分测试
拆分测试一直是一个很重要的问题，一定要保证接口的正常使用保证接口的平滑迁移。不同项目之间最好使用子域名进行划分，而不是简单的使用端口进行划分，由于手动测试的缓慢，所以导致拆分项目也是拖泥带水，这种代码级别的问题，应该保证速度，时间一旦拖得很长就容易导致各种维护成本上涨。

目前已经做了一周的项目拆分，然而拆分效果却不尽人意，没有我想象中的速度，很多业务逻辑等到拆分的时候才开始测试出来，很多都不知道为什么代码也是错的，但是当时就会部署到线上。历史问题，也不想去追究，希望能改完吧，虽然我认为这种工作态度是不可能。